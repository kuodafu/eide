#include "../EWindow.h"


void EWindow_OnPaint_DrawEIcon(LPCANVAS hCanvas, LPOBJSTRUCT pData)
{
    static LPEX_IMAGE hEIcon = 0;
    if (!hEIcon)
    {
        const unsigned char pEIcon[] =
        {
            0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x20, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x01, 0x00, 0x00, 0x16, 0x00,
            0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
            0x00, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00,
            0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00,
            0xFF, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF,
            0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x09, 0x99, 0x99, 0x99, 0x99, 0x99, 0x99, 0x90, 0x99, 0x99, 0x9F, 0xF9, 0x99, 0xFF,
            0xF9, 0x99, 0x9F, 0xFF, 0x99, 0xFF, 0x99, 0x9F, 0xFF, 0x99, 0x99, 0xFF, 0xF9, 0x9F, 0xF9, 0x99, 0xFF, 0xF9, 0x99, 0x99,
            0xFF, 0x99, 0xFF, 0x99, 0x9F, 0xF9, 0x9F, 0xF9, 0x9F, 0xF9, 0x9F, 0xF9, 0x9F, 0xF9, 0x99, 0xFF, 0x99, 0xFF, 0x99, 0xFF,
            0x9F, 0xF9, 0x99, 0x9F, 0xF9, 0x9F, 0xF9, 0xFF, 0x9F, 0xF9, 0x99, 0x99, 0xFF, 0xF9, 0xFF, 0xFF, 0xFF, 0x99, 0x99, 0x99,
            0x99, 0xFF, 0x9F, 0x99, 0x99, 0x99, 0x9F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x99, 0x9F, 0x99, 0x99, 0x99, 0x99, 0x99,
            0x99, 0xF9, 0x9F, 0x9F, 0xFF, 0xFF, 0xFF, 0xFF, 0xF9, 0xF9, 0x9F, 0x99, 0x99, 0x99, 0x99, 0x99, 0x99, 0xF9, 0x99, 0xFF,
            0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x99, 0x09, 0x99, 0x99, 0x99, 0x99, 0x99, 0x99, 0x90, 0x80, 0x01, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x01, 0x00, 0x00,
        };
        hEIcon = _img_create_frommemory(pEIcon, sizeof(pEIcon));
    }

    RECT_F rcDraw;
    int cxIcon = s_info->scale(hEIcon->GetWidth());
    int cyIcon = s_info->scale(hEIcon->GetHeight());
    rcDraw.left = (float)((s_info->scale(WINDOW_CAPTION_HEIGHT) - cxIcon) / 2);
    rcDraw.top  = (float)((s_info->scale(WINDOW_CAPTION_HEIGHT) - cyIcon) / 2);
    rcDraw.right = rcDraw.left + (float)cxIcon;
    rcDraw.bottom = rcDraw.top + (float)cyIcon;
    _canvas_drawimagerect(hCanvas, hEIcon, rcDraw.left, rcDraw.top, rcDraw.right, rcDraw.bottom, 255);
}
